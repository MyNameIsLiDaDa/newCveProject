<script>
  class selfPro {
    constructor(fn) {
      this.status = 'pending'
      this.val = null
      fn(this.resolve.bind(this), this.reject.bind(this))
    }
    resolve(val) {
      this.val = val
      this.status = 'resolved'
    }
    reject() {
      this.status = 'rejected'
    }
    then(onResolve, onReject) {
      setTimeout(() => {
        if (this.status === 'resolved') {
          onResolve(this.val)
        } else if (this.status === 'rejected') {
          onReject()

        }
      });
    }
  }
  const f = new selfPro((resolve, reject) => {
    resolve('aaa')
    // resolve()

  })
  f.then(res => {
    console.log(res);
  })

</script>
